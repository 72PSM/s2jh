var Grid=function(){var a=false;return{initGridDefault:function(){$.extend($.ui.multiselect,{locale:{addAll:"全部添加",removeAll:"全部移除",itemsCount:"已选择项目列表"}});$.extend($.jgrid.ajaxOptions,{dataType:"json"});$.extend($.jgrid.defaults,{datatype:"json",loadui:false,loadonce:false,filterToolbar:{},ignoreCase:true,prmNames:{npage:"npage"},jsonReader:{repeatitems:false,root:"content",total:"totalPages",records:"totalElements"},treeReader:{level_field:"extraAttributes.level",parent_id_field:"extraAttributes.parent",leaf_field:"extraAttributes.isLeaf",expanded_field:"extraAttributes.expanded",loaded:"extraAttributes.loaded",icon_field:"extraAttributes.icon"},autowidth:true,rowNum:15,page:1,altclass:"ui-jqgrid-evennumber",height:"auto",viewsortcols:[true,"vertical",true],mtype:"GET",viewrecords:true,rownumbers:true,toppager:true,recordpos:"left",gridview:true,altRows:true,sortable:false,multiboxonly:true,multiselect:true,multiSort:false,forceFit:true,shrinkToFit:true,sortorder:"desc",sortname:"createdDate",ajaxSelectOptions:{cache:true},loadError:function(d,e,b,c){Global.notify("error","表格数据加载处理失败,请尝试刷新或联系管理员!")},subGridOptions:{reloadOnExpand:false}});$.extend($.jgrid.search,{multipleSearch:true,multipleGroup:true,width:700,jqModal:false,searchOperators:true,stringResult:true,searchOnEnter:true,defaultSearch:"bw",operandTitle:"点击选择查询方式",operands:{eq:"=",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}});$.extend($.jgrid.del,{serializeDelData:function(b){b.ids=b.id;b.id="";return b},errorTextFormat:function(c){var b=jQuery.parseJSON(c.responseText);return b.message},afterComplete:function(d){var c=new Array();var b=jQuery.parseJSON(d.responseText);if(b.type=="success"){top.$.publishMessage(b.message);c[0]=true}else{top.$.publishError(b.message);c[0]=false}return c},ajaxDelOptions:{dataType:"json"}});$.jgrid.extend({bindKeys:function(b){var c=$.extend({upKey:true,downKey:true,onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},b||{});return this.each(function(){var d=this;if(!$("body").is("[role]")){$("body").attr("role","application")}d.p.scrollrows=c.scrollingRows;$(d).keydown(function(h){var l=$(d).find("tr[tabindex=0]")[0],n,g,m,f=d.p.treeReader.expanded_field;if(l){m=d.p._index[$.jgrid.stripPref(d.p.idPrefix,l.id)];if(h.keyCode===37||h.keyCode===38||h.keyCode===39||h.keyCode===40){if(h.keyCode===38&&c.upKey){g=l.previousSibling;n="";if(g){if($(g).is(":hidden")){while(g){g=g.previousSibling;if(!$(g).is(":hidden")&&$(g).hasClass("jqgrow")){n=g.id;break}}}else{n=g.id}}$(d).jqGrid("setSelection",n,true,h);h.preventDefault()}if(h.keyCode===40&&c.downKey){g=l.nextSibling;n="";if(g){if($(g).is(":hidden")){while(g){g=g.nextSibling;if(!$(g).is(":hidden")&&$(g).hasClass("jqgrow")){n=g.id;break}}}else{n=g.id}}$(d).jqGrid("setSelection",n,true,h);h.preventDefault()}if(h.keyCode===37){if(d.p.treeGrid&&d.p.data[m][f]){$(l).find("div.treeclick").trigger("click")}$(d).triggerHandler("jqGridKeyLeft",[d.p.selrow]);if($.isFunction(c.onLeftKey)){c.onLeftKey.call(d,d.p.selrow)}}if(h.keyCode===39){if(d.p.treeGrid&&!d.p.data[m][f]){$(l).find("div.treeclick").trigger("click")}$(d).triggerHandler("jqGridKeyRight",[d.p.selrow]);if($.isFunction(c.onRightKey)){c.onRightKey.call(d,d.p.selrow)}}}else{if(h.keyCode===13){var e=h.target;if(e.tagName==="TEXTAREA"){return true}h.stopPropagation();$(d).triggerHandler("jqGridKeyEnter",[d.p.selrow]);if($.isFunction(c.onEnter)){c.onEnter.call(d,d.p.selrow)}}else{if(h.keyCode===32){h.stopPropagation();$(d).triggerHandler("jqGridKeySpace",[d.p.selrow]);if($.isFunction(c.onSpace)){c.onSpace.call(d,d.p.selrow)}}else{if(h.keyCode===27){h.stopPropagation();$(d).jqGrid("restoreRow",d.p.selrow,c.afterrestorefunc);$(d).jqGrid("showAddEditButtons")}}}}}})})},refresh:function(){this.each(function(){var b=this;if(!b.grid){return}$(b).jqGrid("setGridParam",{datatype:"json"}).trigger("reloadGrid")})},search:function(b){this.each(function(){var e=this;if(!e.grid){return}var c=$(e).jqGrid("getGridParam","url");for(var d in b){c=AddOrReplaceUrlParameter(c,d,b[d])}$(e).jqGrid("setGridParam",{url:c,page:1}).trigger("reloadGrid")})},exportExcelLocal:function(b){this.each(function(){var f=this;if(!f.grid){return}if(!confirm("确认导出当前页面 "+f.p.caption+" 数据为Excel下载文件？")){return}var e=new Array();e=$(f).getDataIDs();var m=f.p.colModel;var p=f.p.colNames;var h="";for(k=0;k<p.length;k++){var n=m[k];if(n.hidedlg||n.hidden||n.disableExport){continue}h=h+p[k]+"\t"}h=h+"\n";for(i=0;i<e.length;i++){data=$(f).getRowData(e[i]);for(j=0;j<p.length;j++){var n=m[j];if(n.hidedlg||n.hidden||n.disableExport){continue}var g=data[n.name];var l=null;if(n.searchoptions&&n.searchoptions.value){l=n.searchoptions.value}else{if(n.editoptions&&n.editoptions.value){l=n.editoptions.value}}if(l){g=l[g]}if(g.indexOf("<")>-1&&g.indexOf(">")>-1){g=$(g).text()}if(g==""){g=data[n.name]}if(g=="null"||g==null){g=""}g=g.replace(/\&nbsp;/g,"");h=h+g+"\t"}h=h+"\n"}h=h+"\n";var c=$('<form method="post" target = "_blank" action="'+WEB_ROOT+'/pub/grid!export"></form>').appendTo($("body"));var o=$('<input type="hidden" name="exportDatas"/>').appendTo(c);var d=$('<input type="hidden" name="fileName"/>').appendTo(c);d.val("export-data.xls");o.val(h);c.submit();c.remove()})},refreshRowIndex:function(){var b=$(this);$.each($(b).jqGrid("getDataIDs"),function(c,d){$(b).find("#"+d).find("input,select").each(function(){var e=$(this).attr("name");$(this).attr("name",e.substring(0,e.indexOf("[")+1)+c+e.substring(e.indexOf("]"),e.length))})})},getAtLeastOneSelectedItem:function(g){var f=$(this);var d=[];var e=jQuery(f).jqGrid("getGridParam","selarrrow");if(e.length>0){for(var b=0;b<e.length;b++){var c=$("#jqg_"+jQuery(f).attr("id")+"_"+e[b]).is(":disabled");if(!c){d.push(e[b])}}}else{var h=jQuery(f).jqGrid("getGridParam","selrow");if(h){d.push(h)}}if(g){jQuery(f).find("table.jqsubgrid").each(function(){var n=$(this).jqGrid("getGridParam","selarrrow");for(var l=0;l<n.length;l++){var m=$("#jqg_"+jQuery(this).attr("id")+"_"+e[l]).is(":disabled");if(!m){d.push(n[l])}}})}if(d.length==0){Global.notify("error","请至少选择一条行项目！");return false}else{return d}},getOnlyOneSelectedItem:function(g){var f=$(this);var d=[];var e=jQuery(f).jqGrid("getGridParam","selarrrow");if(e.length>0){for(var b=0;b<e.length;b++){var c=$("#jqg_"+jQuery(f).attr("id")+"_"+e[b]).is(":disabled");if(!c){d.push(e[b])}}}else{var h=jQuery(f).jqGrid("getGridParam","selrow");if(h){d.push(h)}}if(d.length==0){if(g){toastr.error("请选取操作项目！")}return false}else{if(d.length>1){toastr.error("只能选择一条操作项目！");return false}return d[0]}},getSelectedItem:function(){var c=$(this);var b=jQuery(c).jqGrid("getGridParam","selarrrow");return b.join()},getSelectedRowdatas:function(){var b=$(this);var c=[];var e=b.jqGrid("getGridParam","selarrrow");if(e){$.each(e,function(g,h){var l=b.jqGrid("getRowData",h);l.id=h;c.push(l)})}else{var d=b.jqGrid("getGridParam","selrow");if(d){var f=b.jqGrid("getRowData",d);f.id=d;c.push(f)}}return c},getSelectedRowdata:function(){var b=$(this);var c=b.jqGrid("getGridParam","selrow");if(c){return b.jqGrid("getRowData",c)}},getDirtyRowdatas:function(){var b=$(this);var c=[];var d=b.jqGrid("getGridParam","colModel");var e=[];$.each(d,function(n,m){if(m.editable){e.push(m.name)}});var f=b.jqGrid("getDataIDs");var g=0;$.each(f,function(m,n){if(!Util.startWith(n,"-")){g++}});$.each(f,function(n,q){var p=b.jqGrid("getRowData",q);var m=p._dirtyRow;if(m==true||m=="true"){if(Util.startWith(q,"-")){q=""}var o={id:q};$.each(e,function(s,r){o[r]=p[r]});o._arrayIndex=p._arrayIndex;if(p["extraAttributes.operation"]){o["extraAttributes.operation"]=p["extraAttributes.operation"]}c.push(o)}});var l=b.jqGrid("getGridParam","batchEntitiesPrefix");if(l){var h={};$.each(c,function(m,o){var n=o._arrayIndex;delete o._arrayIndex;if(n==undefined||n==""){n=g;g++}$.each(o,function(q,p){h[l+"["+n+"]."+q]=p})});return h}return c},insertNewRowdata:function(f){var b=$(this);var e=null;var d=b.jqGrid("getDataIDs");$.each(d,function(h,m){var l=b.jqGrid("getRowData",m);var g=l._dirtyRow;if(g==true||g=="true"){}else{e=m;return false}});var c=-Math.floor(new Date().getTime()+Math.random()*100+100);f._dirtyRow=true;if(e){b.jqGrid("addRowData",c,f,"before",e)}else{b.jqGrid("addRowData",c,f,"last")}return c},setEditingRowdata:function(l,c){var b=$(this);var d=b.find("tbody");for(var f in l){var g="input[name='"+f+"'],select[name='"+f+"'],textarea[name='"+f+"']";var e=d.find(g);if(c==false){if($.trim(e.val())!=""){continue}}var h=l[f];e.val(h).attr("title",h);if(e.is("select")){e.select2({openOnEnter:false})}}},getEditingRowdata:function(){var b=$(this);var d=b.find("tbody");var e={};var c="input,select,textarea";d.find(c).each(function(){var f=$(this);e[f.attr("name")]=f.val()});return e},isEditingMode:function(d){var b=$(this);var c=b.find('tr[editable="1"]');if(c.size()>0){if(d==undefined){return true}if(d===true){alert("请先保存或取消正在编辑的表格数据行项后再操作")}else{alert(d)}return true}return false},sumColumn:function(d,f){var b=$(this);if(f==undefined){f=2}var e=b.jqGrid("getCol",d,false,"sum");var c=Math.pow(10,f);return Math.round(e*c)/c},inlineNav:function(b,c){c=$.extend(true,{edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",save:true,saveicon:"ui-icon-disk",cancel:true,cancelicon:"ui-icon-cancel",del:true,delicon:"ui-icon-trash",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:true},$.jgrid.nav,c||{});return this.each(function(){if(!this.grid){return}var l=this,o,d=$.jgrid.jqID(l.p.id),f=$(l.p.toppager).attr("id");l.p._inlinenav=true;if(c.addParams.useFormatter===true){var q=l.p.colModel,m;for(m=0;m<q.length;m++){if(q[m].formatter&&q[m].formatter==="actions"){if(q[m].formatoptions){var g={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},h=$.extend(g,q[m].formatoptions);c.addParams.addRowParams={keys:h.keys,oneditfunc:h.onEdit,successfunc:h.onSuccess,url:h.url,extraparam:h.extraparam,aftersavefunc:h.afterSave,errorfunc:h.onError,afterrestorefunc:h.afterRestore}}break}}}if(l.p.editrulesurl){var n={name:[]};var q=l.p.colModel,m;for(m=0;m<q.length;m++){var p=q[m];if(p.editable&&p.editrules==undefined){var e=p.name;if(p.index){e=p.index}n.name.push(e)}}$(l).ajaxJsonUrl(l.p.editrulesurl,function(u){var r=l.p.colModel,t;for(var s in u){for(t=0;t<r.length;t++){var v=r[t];if((v.index&&v.index==s)||(v.name&&v.name==s)){v.editrules=u[s];break}}}},n)}$(l).jqGrid("navSeparatorAdd",b);if(l.p.toppager){$(l).jqGrid("navSeparatorAdd",l.p.toppager)}if(c.add){$(l).jqGrid("navButtonAdd",b,{caption:c.addtext,title:c.addtitle,buttonicon:c.addicon,id:l.p.id+"_iladd",onClickButton:function(){var t=$(l).getOnlyOneSelectedItem(false);if(t){var u=$(l).getRowData(t);c.addParams.initdata=u;var r=l.p.colModel,s;for(s=0;s<r.length;s++){if(r[s].editcopy==false){delete c.addParams.initdata[r[s].name]}else{if(r[s].editcopy=="append"){c.addParams.initdata[r[s].name]=u[r[s].name]+"_COPY"}}}$(l).jqGrid("resetSelection")}else{c.addParams.initdata={id:""}}c.addParams.rowID=-(new Date().getTime());$(l).jqGrid("addRow",c.addParams);if(!c.addParams.useFormatter){$("#"+d+"_ilsave").removeClass("ui-state-disabled");$("#"+d+"_ilcancel").removeClass("ui-state-disabled");$("#"+d+"_iladd").addClass("ui-state-disabled");$("#"+d+"_iledit").addClass("ui-state-disabled");$("#"+d+"_toppager_ilsave").removeClass("ui-state-disabled");$("#"+d+"_toppager_ilcancel").removeClass("ui-state-disabled");$("#"+d+"_toppager_iladd").addClass("ui-state-disabled");$("#"+d+"_toppager_iledit").addClass("ui-state-disabled")}}});if(l.p.toppager){$(l).jqGrid("navButtonAdd",l.p.toppager,{caption:c.addtext,title:c.addtitle,buttonicon:c.addicon,id:f+"_iladd",onClickButton:function(){$(".ui-icon-plus",$(l.p.pager)).click()}})}}if(c.edit){$(l).jqGrid("navButtonAdd",b,{caption:c.edittext,title:c.edittitle,buttonicon:c.editicon,id:l.p.id+"_iledit",onClickButton:function(){var r=$(l).getOnlyOneSelectedItem();if(r){if($("#"+r,$(l)).hasClass("not-editable-row")){alert("提示：当前行项不可编辑");return}$(l).jqGrid("editRow",r,c.editParams);$("#"+d+"_ilsave").removeClass("ui-state-disabled");$("#"+d+"_ilcancel").removeClass("ui-state-disabled");$("#"+d+"_iladd").addClass("ui-state-disabled");$("#"+d+"_iledit").addClass("ui-state-disabled");$("#"+d+"_toppager_ilsave").removeClass("ui-state-disabled");$("#"+d+"_toppager_ilcancel").removeClass("ui-state-disabled");$("#"+d+"_toppager_iladd").addClass("ui-state-disabled");$("#"+d+"_toppager_iledit").addClass("ui-state-disabled")}}});if(l.p.toppager){$(l).jqGrid("navButtonAdd",l.p.toppager,{caption:c.edittext,title:c.edittitle,buttonicon:c.editicon,id:f+"_iledit",onClickButton:function(){$(".ui-icon-pencil",$(l.p.pager)).click()}})}}if(c.save){$(l).jqGrid("navButtonAdd",b,{caption:c.savetext||"",title:c.savetitle||"保存编辑行项",buttonicon:c.saveicon,id:l.p.id+"_ilsave",onClickButton:function(){var s=l.p.savedRow[0].id;if(s){var r=l.p.prmNames,u=r.oper,t={};if($("#"+$.jgrid.jqID(s),"#"+d).hasClass("jqgrid-new-row")){c.addParams.addRowParams.extraparam[u]=r.addoper;t=c.addParams.addRowParams;t.extraparam.id=""}else{if(!c.editParams.extraparam){c.editParams.extraparam={}}c.editParams.extraparam[u]=r.editoper;t=c.editParams}t.extraparam._dirtyRow=true;if($(l).jqGrid("saveRow",s,t)){$(l).jqGrid("showAddEditButtons")}}else{$.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+d,jqm:true});$("#jqg_alrt").focus()}}});$("#"+d+"_ilsave").addClass("ui-state-disabled");if(l.p.toppager){$(l).jqGrid("navButtonAdd",l.p.toppager,{caption:c.savetext||"",title:c.savetitle||"保存编辑行项",buttonicon:c.saveicon,id:f+"_ilsave",onClickButton:function(){$(".ui-icon-disk",$(l.p.pager)).click()}});$("#"+d+"_toppager_ilsave").addClass("ui-state-disabled")}}if(c.cancel){$(l).jqGrid("navButtonAdd",b,{caption:c.canceltext||"",title:c.canceltitle||"放弃正在编辑行项",buttonicon:c.cancelicon,id:l.p.id+"_ilcancel",onClickButton:function(){var s=l.p.savedRow[0].id,r={};if(s){if($("#"+$.jgrid.jqID(s),"#"+d).hasClass("jqgrid-new-row")){r=c.addParams.addRowParams}else{r=c.editParams}$(l).jqGrid("restoreRow",s,r);$(l).jqGrid("resetSelection");$(l).jqGrid("showAddEditButtons")}else{$.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+d,jqm:true});$("#jqg_alrt").focus()}}});if(l.p.toppager){$(l).jqGrid("navButtonAdd",l.p.toppager,{caption:c.canceltext||"",title:c.canceltitle||"放弃正在编辑行项",buttonicon:c.cancelicon,id:f+"_ilcancel",onClickButton:function(){$(".ui-icon-cancel",$(l.p.pager)).click()}})}}if(c.del){$(l).jqGrid("navSeparatorAdd",b);$(l).jqGrid("navButtonAdd",b,{caption:c.deltext||"",title:c.deltitle||"删除所选行项",buttonicon:c.delicon,id:l.p.id+"_ildel",onClickButton:function(){if(!$(this).hasClass("ui-state-disabled")){var s=$(l).getAtLeastOneSelectedItem();if(s){$(l).jqGrid("restoreRow",s);if($.isFunction(c.delfunc)){c.delfunc.call(l,s)}else{if(l.p.delurl==undefined||l.p.delurl=="clientArray"){$.each(s,function(u,x){if(Util.startWith(x,"-")){$(l).jqGrid("delRowData",x)}else{var v=$(l).find("#"+x);var w=$(l).jqGrid("getRowData",x);for(var t in w){if(t=="id"||Util.endWith(t,".id")||t=="_arrayIndex"){}else{if(t=="_dirtyRow"){w[t]=true}else{if(t=="extraAttributes.operation"){w[t]="remove"}else{w[t]=""}}}}$(l).jqGrid("setRowData",x,w);v.hide()}if(l.p.afterInlineDeleteRow){l.p.afterInlineDeleteRow.call($(l),x)}})}else{var s=$(l).getAtLeastOneSelectedItem();if(s){var r=Util.AddOrReplaceUrlParameter(l.p.delurl,"ids",s.join(","));$(l).ajaxPostURL(r,function(t){$.each(s,function(u,w){var w=$.trim(w);var v=$(l).find("tr.jqgrow[id='"+w+"']");if(t.userdata&&t.userdata[w]){var x=t.userdata[w];v.pulsate({color:"#bf1c56",repeat:3})}else{$(l).jqGrid("delRowData",w)}})},"确认批量删除所选记录吗？")}}}$(l).jqGrid("showAddEditButtons")}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}});if(l.p.toppager){$(l).jqGrid("navSeparatorAdd",l.p.toppager);$(l).jqGrid("navButtonAdd",l.p.toppager,{caption:c.deltext||"",title:c.deltitle||"删除所选行项",buttonicon:c.delicon,id:f+"_ildel",onClickButton:function(){$(".ui-icon-trash",$(l.p.pager)).click()}})}}if(c.restoreAfterSelect===true){if($.isFunction(l.p.beforeSelectRow)){o=l.p.beforeSelectRow}else{o=false}l.p.beforeSelectRow=function(t,s){var r=true;if(l.p.savedRow.length>0&&l.p._inlinenav===true&&(t!==l.p.selrow&&l.p.selrow!==null)){if(l.p.selrow===c.addParams.rowID){$(l).jqGrid("delRowData",l.p.selrow)}else{$(l).jqGrid("restoreRow",l.p.selrow,c.editParams)}$(l).jqGrid("showAddEditButtons")}if(o){r=o.call(l,t,s)}return r}}$(l).jqGrid("showAddEditButtons")})},showAddEditButtons:function(){return this.each(function(){if(!this.grid){return}var b=$.jgrid.jqID(this.p.id);$("#"+b+"_ilsave").addClass("ui-state-disabled");$("#"+b+"_ilcancel").addClass("ui-state-disabled");$("#"+b+"_iladd").removeClass("ui-state-disabled");$("#"+b+"_iledit").removeClass("ui-state-disabled");$("#"+b+"_toppager_ilsave").addClass("ui-state-disabled");$("#"+b+"_toppager_ilcancel").addClass("ui-state-disabled");$("#"+b+"_toppager_iladd").removeClass("ui-state-disabled");$("#"+b+"_toppager_iledit").removeClass("ui-state-disabled")})}});a=true},initAjax:function(b){if(b==undefined){b=$("body")}$('table[data-grid="table"],table[data-grid="items"]',b).each(function(){Grid.initGrid($(this))})},initGrid:function(N,x){if(!a){Grid.initGridDefault()}var X=$(N);if(X.hasClass("ui-jqgrid-btable")){return}if(X.attr("id")==undefined){X.attr("id","grid_"+new Date().getTime())}if(x==undefined&&X.data("gridOptions")==undefined){alert("Grid options undefined");return}var t=$.extend(true,{},X.data("gridOptions"),x);var c=X.attr("data-grid");var A=null;var S=X.attr("id")+"-context-menu-container";var O=null;var e=(Util.notSmallViewport()?true:false);if(e){e=(c=="items"?false:true)}var B=(Util.notSmallViewport()?{}:false);if(B){B=(c=="items"?false:true)}var D=$.extend(true,{},$.jgrid.defaults,{formatter:{integer:{defaultValue:""},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:""},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:""},},cmTemplate:{sortable:c=="items"?false:true},viewsortcols:c=="items"?[true,"vertical",false]:[true,"vertical",true],altRows:c=="items"?false:true,hoverrows:c=="items"?false:true,pgbuttons:c=="items"?false:true,pginput:c=="items"?false:true,rowList:c=="items"?[]:[10,15,20,50,100,200,500,1000,2000],inlineNav:{add:t.editurl||c=="items"?true:false,edit:t.editurl||c=="items"?true:false,del:t.delurl||c=="items"?true:false,restoreAfterSelect:c=="items"?false:true,addParams:{addRowParams:{extraparam:{},restoreAfterError:false,beforeSaveRow:function(af){if(D.beforeInlineSaveRow){D.beforeInlineSaveRow.call(X,af)}},aftersavefunc:function(ah,ai){if(D.editurl=="clientArray"){X.jqGrid("resetSelection");if(D.afterInlineSaveRow){D.afterInlineSaveRow.call(X,ah)}setTimeout(function(){$("#"+A).find(".ui-pg-div span.ui-icon-plus").click()},200);return}var ag=jQuery.parseJSON(ai.responseText);if(ag.type=="success"||ag.type=="warning"){Global.notify(ag.type,ag.message);var af=ag.userdata.id;X.find("#"+ah).attr("id",af);X.jqGrid("resetSelection");X.jqGrid("setSelection",af);if(D.afterInlineSaveRow){D.afterInlineSaveRow.call(X,ah)}setTimeout(function(){$("#"+A).find(".ui-pg-div span.ui-icon-plus").click()},200)}else{if(ag.type=="failure"||ag.type=="error"){Global.notify("error",ag.message)}else{Global.notify("error","数据处理异常，请联系管理员")}}},errorfunc:function(ag,ah){var af=jQuery.parseJSON(ah.responseText);Global.notify("error",af.message)}}},editParams:{restoreAfterError:false,beforeSaveRow:function(af){if(D.beforeInlineSaveRow){D.beforeInlineSaveRow.call(X,af)}},oneditfunc:function(aj){var ag=X.jqGrid("getGridParam","iCol");var af=X.jqGrid("getGridParam","colModel")[ag];var ai=X.find("tr#"+aj);var ak=ai.find("> td:eq("+ag+")");var ah=ak.find("input:visible:first");if(ah.size()>0&&ah.attr("readonly")==undefined){setTimeout(function(){ah.focus()},200)}else{ai.find("input:visible:enabled:first").focus()}},aftersavefunc:function(ag,aj){var ai=true;if(D.editurl!="clientArray"){var af=jQuery.parseJSON(aj.responseText);if(af.type=="success"||af.type=="warning"){Global.notify(af.type,af.message)}else{if(af.type=="failure"||af.type=="error"){Global.notify("error",af.message);ai=false}else{Global.notify("error","数据处理异常，请联系管理员");ai=false}}}if(ai){if(D.afterInlineSaveRow){D.afterInlineSaveRow.call(X,ag)}if(D.editurl!="clientArray"){var ah=X.find("tr.jqgrow[id='"+ag+"']").next("tr");if(ah.size()>0){var ak=ah.attr("id");X.jqGrid("resetSelection");X.jqGrid("setSelection",ak);setTimeout(function(){$("#"+A).find(".ui-pg-div span.ui-icon-pencil").click()},200)}}}},errorfunc:function(ag,ah){var af=jQuery.parseJSON(ah.responseText);Global.notify("error",af.message)}}},filterToolbar:B,multiselect:e,contextMenu:true,columnChooser:true,exportExcelLocal:true,loadBeforeSend:function(){App.blockUI(X.closest(".ui-jqgrid"))},subGridBeforeExpand:function(){var af=X.closest(".ui-jqgrid-bdiv");af.css({height:"auto"})},loadComplete:function(ah){if(ah&&ah.content){$.each(ah.content,function(ai,aj){X.setRowData(aj.id,{_arrayIndex:ai})})}if(c=="items"&&D.inlineNav.add!=false){for(var ag=1;ag<=3;ag++){X.addRowData(-ag,{})}}if(R=="enable"&&D.contextMenu&&O.find("li").length>0){X.find("tr.jqgrow").each(function(){$(this).contextmenu({target:"#"+S,onItem:function(ak,aj){var ai=$(aj).attr("role-idx");O.find('a[role-idx="'+ai+'"]').click();return true}})})}if(D.footerLocalDataColumn){$.each(D.footerLocalDataColumn,function(aj,al){var ak=X.jqGrid("sumColumn",al);var ai=[];ai[al]=ak;X.footerData("set",ai)})}if(R=="enable"&&D.contextMenu&&O.find("li").length>0){X.find("tr.jqgrow").each(function(){$(this).contextmenu({target:"#"+S,onItem:function(ak,aj){var ai=$(aj).attr("role-idx");O.find('a[role-idx="'+ai+'"]').click();return true}})})}if(D.footerLocalDataColumn){$.each(D.footerLocalDataColumn,function(aj,al){var ak=X.jqGrid("getCol",al,false,"sum");var ai=[];ai[al]=ak;X.footerData("set",ai)})}if(X.attr("data-selected")){X.jqGrid("setSelection",X.attr("data-selected"),false)}var af=t.userLoadComplete;if(af){af.call(X,ah)}$('[data-hover="dropdown"]',X.closest(".ui-jqgrid")).dropdownHover();App.unblockUI(X.closest(".ui-jqgrid"))},beforeSelectRow:function(ah){if(D.inlineNav.restoreAfterSelect==false){var ag=X.jqGrid("getGridParam","selrow");var af=X.find("tr#"+ag).attr("editable");if(ag&&ag!=ah&&af=="1"){$("#"+A).find(".ui-pg-div span.ui-icon-disk").click();return false}}return true},onSelectRow:function(ah,af,ag){X.find("tr.jqgrow").attr("tabindex",-1);X.find("tr.jqgrow[id='"+ah+"']").attr("tabindex",0);if(c=="items"){$("#"+A).find(".ui-pg-div span.ui-icon-pencil").click()}},onCellSelect:function(ag,af){X.jqGrid("setGridParam",{iCol:af})},ondblClickRow:function(ai,ak,ag,aj){var af=$("#"+A).find("i.fa-edit").parent("a");if(af.size()>0){af.click()}else{if(c!="items"){var ah=$("#"+A).find(".ui-pg-div span.ui-icon-pencil");if(ah.size()>0){ah.click()}else{$("#"+A).find("i.fa-credit-card").parent("a").click()}}}aj.stopPropagation()}},t);if($.isFunction(D.url)){D.url=D.url.call(X)}if(D.url==undefined){D.url=X.attr("data-url")}if(D.url==undefined){D.datatype="local"}if(D.pager==undefined||D.pager){A=X.attr("id")+"_pager";$("<div id='"+A+"'/>").insertAfter(X);D.pager="#"+A}else{D.toppager=false}if(D.toppager){D.toppager="#"+X.attr("id")+"_toppager"}if(D.treeGrid){D.rownumbers=false}if(t.editurl==undefined&&c=="items"){D.editurl="clientArray"}if(t.delurl==undefined&&c=="items"){D.delurl="clientArray"}if(D.editurl=="clientArray"){D.cellsubmit=D.editurl}else{D.cellurl=D.editurl}var L=0;var K=false;var J=false;$.each(D.colModel,function(ah,af){if(af.frozen){K=true}af=$.extend(true,{editoptions:{rows:1},searchoptions:{clearSearch:true,searchhidden:true,sopt:["bw","bn","eq","ne","cn","nc","ew","en"],defaultValue:"",buildSelect:function(an){var am=jQuery.parseJSON(an);if(am==null){am=an}var al="<select>";al+="<option value=''></option>";for(var ak in am){ak=ak+"";al+=("<option value='"+ak+"'>"+am[ak]+"</option>")}al+="</select>";return al}}},af);if(af.name=="id"){J=true}if(af.responsive){if(af.hidden==undefined){var ag=$(window).width();var aj=af.responsive;if(aj=="sm"){if(ag<768){af.hidden=true}}else{if(aj=="md"){if(ag<992){af.hidden=true}}else{if(aj=="lg"){if(ag<1200){af.hidden=true}}}}}}if(af.formatter=="currency"){af=$.extend(true,{width:80,align:"right",formatoptions:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",defaultValue:""}},af);af.searchoptions=$.extend(true,af.searchoptions,{sopt:["eq","ne","ge","le","gt","lt"]})}if(af.stype=="date"){af.sorttype="date"}if(af.sorttype=="date"){af=$.extend(true,{width:150,fixed:true,align:"center"},af);if(af.dateformat==undefined){af.dateformat="yyyy-mm-dd"}af.searchoptions=$.extend(true,af.searchoptions,{sopt:["eq","ne","ge","le","gt","lt"],dataInit:function(ak){$(ak).datepicker({language:"zh-CN",autoclose:true,format:af.dateformat})}});af.editoptions=$.extend(af.editoptions,{dataInit:function(ak){if(af.editoptions.time){$(ak).datetimepicker({autoclose:true,todayBtn:true,minuteStep:10})}else{$(ak).datepicker({language:"zh-CN",autoclose:true,format:af.dateformat})}}})}if(af.sorttype=="number"||af.edittype=="number"||af.formatter=="number"){af=$.extend(true,{width:60,align:"center",formatoptions:{defaultValue:""}},af);af.searchoptions=$.extend(true,af.searchoptions,{sopt:["eq","ne","ge","le","gt","lt"]})}if(af.name=="id"){af=$.extend(true,{width:80,align:"center",title:false,formatter:function(an,al,ap,am){if(an&&an.length>5){var ak=an.length;var ao=an.substring(ak-5,ak);return"<span data='"+an+"' onclick='$(this).html($(this).attr(\"data\"))'>..."+ao+"</span>"}else{return"<span>"+an+"</span>"}},frozen:true},af);af.searchoptions=$.extend(true,af.searchoptions,{sopt:["eq","ne","ge","le","gt","lt"]})}if(af.formatter=="checkbox"&&af.edittype==undefined){af.edittype="checkbox"}if(af.edittype=="checkbox"&&af.formatter==undefined){af.formatter="checkbox"}if(af.edittype=="checkbox"){af=$.extend(true,{formatter:"checkbox",stype:"select"},af);af.searchoptions.value={"":"","true":"Y","false":"N"};af.editoptions.value="true:false"}if(af.edittype==undefined||af.edittype=="text"||af.edittype=="select"||af.edittype=="textarea"){var ai=af.editoptions.dataInit;af.editoptions=$.extend(af.editoptions,{dataInit:function(ak){if(ai){ai.call(this,ak)}$(ak).removeClass("editable").addClass("form-control").attr("autocomplete","off").css({width:"100%"});if($(ak).is("select")){$(ak).select2({openOnEnter:false})}}})}if(af.formatter=="checkbox"){af=$.extend(true,{width:60,align:"center",editoptions:{value:"true:false"}},af)}if(af.stype=="select"||af.formatter=="select"){af.searchoptions.sopt=["eq","ne"];if(af.edittype==undefined){af.edittype="select"}if(af.formatter==undefined){af.formatter="select"}af.editoptions=$.extend(true,{optionsurl:af.searchoptions.optionsurl,value:af.searchoptions.value},af.editoptions)}if(af.editoptions.optionsurl){af.editoptions.value=Util.remoteSelectOptions(af.editoptions.optionsurl,X.closest(".panel-content"))}if(typeof af.editoptions.value==="function"){af.editoptions.value=af.editoptions.value.call(X)}if(af.editoptions.value&&af.searchoptions.value==undefined){af.searchoptions.value=af.editoptions.value}if(!af.hidden){if(af.width){L+=af.width}else{L+=300}}D.colModel[ah]=af});if(!J){D.colModel.push({name:"id",hidden:true,hidedlg:true});if(D.colNames){D.colNames.push("id")}}if(c=="items"){D.colModel.push({name:"_dirtyRow",hidden:true,hidedlg:true});if(D.colNames){D.colNames.push("_dirtyRow")}D.colModel.push({name:"_arrayIndex",hidedlg:true,hidden:true});if(D.colNames){D.colNames.push("_arrayIndex")}D.colModel.push({name:"extraAttributes.operation",hidedlg:true,hidden:true});if(D.colNames){D.colNames.push("extraAttributes.operation")}}if(Number(L)>Number(X.parent().width())){$.each(D.colModel,function(ag,af){if(!af.hidden){if(af.width==undefined){af.width=300}}});D.shrinkToFit=false}var W=false;if(X.closest(".ui-subgrid").size()==0&&c!="items"){if(D.height==undefined||D.height=="auto"){W=true;D.height=0}}if(D.jqPivot){var I=D.jqPivot;delete D.jqPivot;var l=D.url;D={multiselect:false,pager:D.pager,shrinkToFit:false};X.jqGrid("jqPivot",l,I,D,{reader:"content"});return}else{X.jqGrid(D)}if(D.filterToolbar){X.jqGrid("filterToolbar",D.filterToolbar);var w=$("#jqgh_"+X.attr("id")+"_rn");var G='<a href="javascript:;" title="显示快速查询"><span class="ui-icon ui-icon-carat-1-s"></span></a>';var P='<a href="javascript:;" title="隐藏快速查询"><span class="ui-icon ui-icon-carat-1-n"></span></a>';if(D.subGrid||D.filterToolbar=="hidden"){w.html(G);X[0].toggleToolbar()}else{w.html(P)}w.on("click",".ui-icon-carat-1-s",function(){w.html(P);X[0].toggleToolbar()});w.on("click",".ui-icon-carat-1-n",function(){w.html(G);X[0].toggleToolbar()})}if(D.setGroupHeaders){X.jqGrid("setGroupHeaders",$.extend(true,{useColSpanStyle:true},D.setGroupHeaders))}X.bindKeys({upKey:false,downKey:false,onEnter:function(ag){if(ag==undefined){return}X.find("tr.jqgrow").attr("tabindex",-1);var af=X.find("tr.jqgrow[id='"+ag+"']");af.attr("tabindex",0);if(D.editurl){if(af.attr("editable")=="1"){E.find(".ui-pg-div span.ui-icon-disk").click()}else{E.find(".ui-pg-div span.ui-icon-pencil").click()}return false}}});if(D.pager){var E=$(D.pager);var ad=Util.notSmallViewport();if(ad){ad=(c=="items"?false:true)}var Z=Util.notSmallViewport();if(Z){Z=(c=="items"?false:true)}X.jqGrid("navGrid",D.pager,{edit:false,add:false,del:false,refresh:ad,search:ad,position:"right",cloneToTop:true});if(D.columnChooser){var d={caption:"",buttonicon:"ui-icon-battery-2",position:"first",title:"设定显示列和顺序",onClickButton:function(){var af=X.jqGrid("getGridParam","width");X.jqGrid("columnChooser",{width:470,done:function(ag){if(ag){this.jqGrid("remapColumns",ag,true);X.jqGrid("setGridWidth",af,false)}else{}}})}};X.jqGrid("navButtonAdd",D.pager,d);if(D.pager&&D.toppager){X.jqGrid("navButtonAdd",D.toppager,d)}}if(Util.notSmallViewport()&&D.exportExcelLocal&&c!="items"){var d={caption:"",buttonicon:"ui-icon-arrowthickstop-1-s",position:"first",title:"导出当前显示数据",onClickButton:function(){X.jqGrid("exportExcelLocal",D.exportExcelLocal)}};if(D.pager){X.jqGrid("navButtonAdd",D.pager,d);if(D.toppager){X.jqGrid("navButtonAdd",D.toppager,d)}}}var F={caption:"",buttonicon:"ui-icon-arrowstop-1-w",position:"first",title:"收缩显示模式",onClickButton:function(){var af=X.jqGrid("getGridParam","width");X.jqGrid("destroyFrozenColumns");X.jqGrid("setGridWidth",af,true)}};if(D.pager){X.jqGrid("navButtonAdd",D.pager,F);if(D.toppager){X.jqGrid("navButtonAdd",D.toppager,F)}}if(D.gridDnD){var aa=$.extend(true,{dropbyname:true,beforedrop:function(af,ah,ag){ag.id=$(ah.draggable).attr("id");return ag},autoid:function(af){return af.id},drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover",greedy:true},ondrop:function(aj,al,am){var ah=$("#"+this.id);var af=ah.closest(".ui-subgrid");var ak="";if(af.size()>0){ak=af.prev(".jqgrow").attr("id")}var ai=$(al.draggable).attr("id");var ag={};ag[D.parent]=ak;ag.id=ai;ah.ajaxPostURL(D.editurl,function(){return true},false,{data:ag})}},D.gridDnD);var r={caption:"",buttonicon:"ui-icon-arrow-4",position:"first",title:"开启拖放移动模式",onClickButton:function(){var af=null;if(X.closest(".ui-subgrid").size()>0){$topGrid=X.parent().closest(".ui-jqgrid-btable:not(.ui-jqgrid-subgrid)");af=$topGrid.parent().find(".ui-jqgrid-btable")}else{af=X.parent().find(".ui-jqgrid-btable")}var ah=[];af.each(function(ai,aj){ah.push("#"+$(this).attr("id"))});var ag=ah.reverse();$.each(ag,function(aj,am){var al=$.map(ah,function(an){return an!=am?an:null});var ai=$(am);if(al.length>0){var ak=$.extend({connectWith:al.join(",")},aa);ai.jqGrid("gridDnD",ak);console.log(am+"=>"+ak.connectWith)}if(!ai.hasClass("ui-jqgrid-dndtable")){ai.addClass("ui-jqgrid-dndtable")}})}};if(D.pager){X.jqGrid("navButtonAdd",D.pager,r);if(D.toppager){X.jqGrid("navButtonAdd",D.toppager,r)}}}if(D.pager&&(D.inlineNav.add||D.inlineNav.edit||D.inlineNav.del)&&D.inlineNav!=false){X.jqGrid("inlineNav",D.pager,D.inlineNav)}E.find(".navtable").css("float","right");var s=E.find(" .navtable > tbody > tr");X.jqGrid("navSeparatorAdd",D.pager,{position:"first"});var g=$("<td></td>").prependTo(s);var V=$('<div class="btn-group dropup btn-group-contexts"><button data-close-others="true" data-delay="1000" data-toggle="dropdown" class="btn btn-xs yellow dropdown-toggle" type="button"><i class="fa fa-cog"></i>  <i class="fa fa-angle-down"></i></button></div>');g.append(V);V.wrap('<div class="clearfix jqgrid-options"></div>');O=$('<ul role="menu" class="dropdown-menu"></ul>');O.appendTo(V);var H=[];var z=[];var u=[];if(D.viewurl){var p=$('<li><a href="#"><i class="fa fa-credit-card"></i> 查看详情</a></li>');p.children("a").bind("click",function(aj){Util.debug(aj.target+":"+aj.type);aj.preventDefault();var al=X.getOnlyOneSelectedItem();if(al){var ah="TBD";var ak=X.jqGrid("getRowData",al);if(D.editcol){ah=ak[D.editcol];if(ah.indexOf("<")>-1&&ah.indexOf(">")>-1){ah=$(ah).text()}}else{ah=ak.id;if(ah.indexOf("<span")>-1){ah=$(ah).text()}}var ag=ah.length;if(ag>8){ah="..."+ah.substring(ag-5,ag)}var ai=Util.AddOrReplaceUrlParameter(D.viewurl,"id",al);var af=X.closest(".tabbable").find(" > .nav");Global.addOrActiveTab(af,{title:"查看: "+ah,url:ai})}});z.push(p)}if(D.fullediturl){if(D.addable==undefined||D.addable!=false){var U=$('<li><a href="#" data-toggle="dynamic-tab" data-url="'+D.fullediturl+'"><i class="fa fa-plus-square"></i> 新增数据</a></li>').appendTo(O);H.push(U);var ae=$('<li><a href="#"><i class="fa fa-copy"></i> 克隆复制</a></li>');ae.children("a").bind("click",function(ah){Util.debug(ah.target+":"+ah.type);ah.preventDefault();if(id=X.getOnlyOneSelectedItem()){var ag=Util.AddOrReplaceUrlParameter(D.fullediturl,"clone",id);var af=X.closest(".tabbable").find(" > .nav");Global.addOrActiveTab(af,{title:"克隆复制",url:ag})}});z.push(ae)}}if(D.fullediturl){var o=$('<li><a href="#"><i class="fa fa-edit"></i> 编辑数据 <span class="badge badge-info">双击</span></a></li>');o.children("a").bind("click",function(aj){Util.debug(aj.target+":"+aj.type);aj.preventDefault();var al=X.getOnlyOneSelectedItem();if(al){var ah="TBD";var ak=X.jqGrid("getRowData",al);if(D.editcol){ah=ak[D.editcol];if(ah.indexOf("<")>-1&&ah.indexOf(">")>-1){ah=$(ah).text()}}else{ah=ak.id;if(ah.indexOf("<span")>-1){ah=$(ah).text()}}var ag=ah.length;if(ag>8){ah="..."+ah.substring(ag-5,ag)}var ai=Util.AddOrReplaceUrlParameter(D.fullediturl,"id",al);var af=X.closest(".tabbable").find(" > .nav");Global.addOrActiveTab(af,{title:"编辑: "+ah,url:ai})}});z.push(o)}if(D.operations){var n=[];D.operations.call(X,n);$.each(n,function(){var af=$(this);var ag=af.attr("data-position");if(ag=="multi"){u.push(af)}else{if(ag=="single"){z.push(af)}else{H.push(af)}}})}if(H.length>0){$.each(H,function(){var aj=$(this);var ag=aj.children("a");aj.appendTo(O);if(Util.notSmallViewport()){var ai=ag.children("i").attr("class");var af="";if(aj.attr("data-text")=="show"){af=ag.text()}var ah=$('<button type="button" class="btn btn-xs blue" style="margin-left:5px"><i class="'+ai+'"></i> '+af+"</button>").appendTo(V.parent());ah.attr("title",aj.text());ah.click(function(){ag.click()})}})}if(z.length>0){if(O.find("li").size()>0){O.append('<li class="divider"></li>')}$.each(z,function(){var ah=$(this);var af=ah.children("a");ah.appendTo(O);if(Util.notSmallViewport()&&ah.attr("data-toolbar")=="show"){var af=ah.children("a");var ag=af.clone();ag.addClass("btn btn-xs blue hidden-xs");ag.css({"margin-left":"5px"});ag.appendTo(V.parent());ag.click(function(ai){af.click();ai.preventDefault();return false})}})}if(u.length>0){if(O.find("li").size()>0){O.append('<li class="divider"></li>')}$.each(u,function(){var ah=$(this);ah.appendTo(O);if(Util.notSmallViewport()&&ah.attr("data-toolbar")=="show"){var af=ah.children("a");var ag=af.clone();ag.addClass("btn btn-xs blue");ag.css({"margin-left":"5px"});ag.appendTo(V.parent());ag.click(function(ai){af.click();ai.preventDefault();return false})}})}if(O.find("li").length==0){V.hide()}else{O.find("li > a").each(function(af){$(this).attr("role-idx",af)})}if(!Util.notSmallViewport()){var m=E.find(" > .ui-pager-control > .ui-pg-table > tbody");var Y=m.find(" > tr > td").eq(0);Y.attr("align","left");$("<tr/>").appendTo(m).append(Y);var Y=m.find(" > tr > td").eq(0);Y.attr("align","left");$("<tr/>").appendTo(m).append(Y);var Y=m.find(" > tr > td").eq(0);Y.find("> .ui-pg-table").css("float","left");E.height("75px")}else{E.find("#"+E.attr("id")+"_left").css({width:"150px"})}if(D.pager&&D.toppager){var q=X.attr("id")+"_toppager";var C=$("#"+q);X.jqGrid("navSeparatorAdd","#"+q,{position:"first"});var b=$("div#"+q+" .ui-pg-table > tbody > tr");var y=b.find("#"+q+"_right");var ac=E.find(".jqgrid-options").parent("td").clone(true);ac.prependTo(y.find("> .ui-pg-table > tbody > tr"));ac.find(".btn-group").removeClass("dropup");y.prependTo(y.parent());var f=b.find("#"+q+"_left");f.css({width:"150px"});f.appendTo(f.parent());var M=f.find(".ui-paging-info");M.css("float","right");C.width(E.width());if(!Util.notSmallViewport()){C.hide()}if(X.closest(".ui-subgrid").size()>0){$(D.pager).hide()}}var R=$(".theme-panel .context-menu-option").val();if(R=="enable"&&D.contextMenu&&O.find("li").length>0){var T=$('<div id="'+S+'" class="context-menu"></div>');O.clone().appendTo(T);$("body").append(T);X.unbind("contextmenu")}}if(W){var v=$("#gbox_"+N.attr("id"));var ab=0;var Q="div.ui-jqgrid-titlebar,div.ui-jqgrid-hdiv,div.ui-jqgrid-pager,div.ui-jqgrid-toppager,div.ui-jqgrid-sdiv";v.find(Q).filter(":visible").each(function(){ab+=$(this).outerHeight()});ab=ab+4;var h=$(window).height()-X.closest(".ui-jqgrid").offset().top-ab;if(h<300){h=300}X.setGridHeight(h,true)}Grid.refreshWidth();if(K){X.jqGrid("setFrozenColumns")}X.jqGrid("gridResize",{minWidth:500,minHeight:100});X.closest(".ui-jqgrid").find(".ui-resizable-s").dblclick(function(){var af=X.jqGrid("getGridParam","height");X.jqGrid("setGridHeight",X.height()+17)}).attr("title","鼠标双击可自动扩展显示区域")},refreshWidth:function(){$("table.ui-jqgrid-btable:visible").each(function(){var c=$(this);var d=c.jqGrid("getGridParam","width");var b=c.closest("div.ui-jqgrid").parent("div").width();if(d!=b){c.jqGrid("setGridWidth",b);var e=$(this).jqGrid("getGridParam","groupHeader");if(e){c.jqGrid("destroyGroupHeader");c.jqGrid("setGroupHeaders",e)}}})},initRecursiveSubGrid:function(f,c,e){var b=$("<table data-grid='table' class='ui-jqgrid-subgrid'/>").appendTo($("#"+f));var d=b.closest("table.ui-jqgrid-btable").data("gridOptions");d.url=Util.AddOrReplaceUrlParameter(d.url,"search['EQ_"+e+"']",c);d.inlineNav=$.extend(true,{addParams:{addRowParams:{extraparam:{}}}},d.inlineNav);d.inlineNav.addParams.addRowParams.extraparam[e]=c;d.parent=e;b.data("gridOptions",d);Grid.initGrid(b);var g=$("#"+f).parent().closest(".ui-jqgrid-btable:not(.ui-jqgrid-subgrid)");if(d.gridDnD&&g.hasClass("ui-jqgrid-dndtable")){$("#"+f).find(".ui-icon-arrow-4:first").click()}},initSubGrid:function(e,d,c){var b=$("<table data-grid='table' class='ui-jqgrid-subgrid'/>").appendTo($("#"+e));b.data("gridOptions",c);Grid.initGrid(b)}}}();